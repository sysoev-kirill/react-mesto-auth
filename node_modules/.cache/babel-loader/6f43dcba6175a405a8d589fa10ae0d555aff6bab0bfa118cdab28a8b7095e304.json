{"ast":null,"code":"import _objectSpread from\"/Users/kirillsysoev/Documents/Privat/yandex_practicum/react-mesto-main-auth/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/kirillsysoev/Documents/Privat/yandex_practicum/react-mesto-main-auth/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/kirillsysoev/Documents/Privat/yandex_practicum/react-mesto-main-auth/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Auth=/*#__PURE__*/function(){function Auth(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Auth);this._baseUrl=baseUrl;this._headers=headers;}_createClass(Auth,[{key:\"_onRes\",value:function _onRes(response){return response.ok?response.json():Promise.reject(_objectSpread(_objectSpread({},response),{},{message:\"Ошибка на стороне сервиса\"}));}},{key:\"register\",value:function register(email,password){return fetch(\"\".concat(this._baseUrl,\"/signup\"),{method:'POST',headers:this._headers,body:JSON.stringify({email:email,password:password})}).then(this._onRes);}},{key:\"authorize\",value:function authorize(email,password){return fetch(\"\".concat(this._baseUrl,\"/signin\"),{method:'POST',headers:this._headers,body:JSON.stringify({email:email,password:password})}).then(this._onRes).then(function(data){if(data.token){localStorage.setItem('jwt',data.token);return data.token;}});}},{key:\"checkToken\",value:function checkToken(token){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{headers:{\"Content-Type\":\"application/json\",authorization:\"Bearer \".concat(token)}}).then(this._onRes);}}]);return Auth;}();export var auth=new Auth({baseUrl:'https://auth.nomoreparties.co',headers:{'Content-Type':'application/json'}});","map":{"version":3,"names":["Auth","_ref","baseUrl","headers","_classCallCheck","_baseUrl","_headers","_createClass","key","value","_onRes","response","ok","json","Promise","reject","_objectSpread","message","register","email","password","fetch","concat","method","body","JSON","stringify","then","authorize","data","token","localStorage","setItem","checkToken","authorization","auth"],"sources":["/Users/kirillsysoev/Documents/Privat/yandex_practicum/react-mesto-main-auth/react-mesto-auth/src/utils/auth.js"],"sourcesContent":["class Auth {\n\tconstructor({ baseUrl, headers }) {\n\t\tthis._baseUrl = baseUrl;\n\t\tthis._headers = headers;\n\t}\n\n\t_onRes(response) {\n\t\treturn response.ok ? response.json() : Promise.reject({ ...response, message: \"Ошибка на стороне сервиса\" });\n\t}\n\n\tregister(email, password) {\n\t\treturn fetch(`${this._baseUrl}/signup`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: this._headers,\n\t\t\tbody: JSON.stringify({ email, password })\n\t\t}).then(this._onRes)\n\t}\n\n\tauthorize(email, password) {\n\t\treturn fetch(`${this._baseUrl}/signin`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: this._headers,\n\t\t\tbody: JSON.stringify({\n\t\t\t\temail,\n\t\t\t\tpassword\n\t\t\t})\n\t\t}).then(this._onRes)\n\t\t\t.then((data) => {\n\t\t\t\tif (data.token) {\n\t\t\t\t\tlocalStorage.setItem('jwt', data.token)\n\t\t\t\t\treturn data.token\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tcheckToken(token) {\n\t\treturn fetch(`${this._baseUrl}/users/me`, {\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\tauthorization: `Bearer ${token}`\n\t\t\t}\n\t\t}).then(this._onRes)\n\t}\n\n\n}\n\nexport const auth = new Auth({\n\tbaseUrl: 'https://auth.nomoreparties.co',\n\theaders: {\n\t\t'Content-Type': 'application/json'\n\t}\n});\n"],"mappings":"shBAAM,CAAAA,IAAI,yBACT,SAAAA,KAAAC,IAAA,CAAkC,IAApB,CAAAC,OAAO,CAAAD,IAAA,CAAPC,OAAO,CAAEC,OAAO,CAAAF,IAAA,CAAPE,OAAO,CAAAC,eAAA,MAAAJ,IAAA,EAC7B,IAAI,CAACK,QAAQ,CAAGH,OAAO,CACvB,IAAI,CAACI,QAAQ,CAAGH,OAAO,CACxB,CAACI,YAAA,CAAAP,IAAA,GAAAQ,GAAA,UAAAC,KAAA,CAED,SAAAC,OAAOC,QAAQ,CAAE,CAChB,MAAO,CAAAA,QAAQ,CAACC,EAAE,CAAGD,QAAQ,CAACE,IAAI,CAAC,CAAC,CAAGC,OAAO,CAACC,MAAM,CAAAC,aAAA,CAAAA,aAAA,IAAML,QAAQ,MAAEM,OAAO,CAAE,2BAA2B,EAAE,CAAC,CAC7G,CAAC,GAAAT,GAAA,YAAAC,KAAA,CAED,SAAAS,SAASC,KAAK,CAAEC,QAAQ,CAAE,CACzB,MAAO,CAAAC,KAAK,IAAAC,MAAA,CAAI,IAAI,CAACjB,QAAQ,YAAW,CACvCkB,MAAM,CAAE,MAAM,CACdpB,OAAO,CAAE,IAAI,CAACG,QAAQ,CACtBkB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEP,KAAK,CAALA,KAAK,CAAEC,QAAQ,CAARA,QAAS,CAAC,CACzC,CAAC,CAAC,CAACO,IAAI,CAAC,IAAI,CAACjB,MAAM,CAAC,CACrB,CAAC,GAAAF,GAAA,aAAAC,KAAA,CAED,SAAAmB,UAAUT,KAAK,CAAEC,QAAQ,CAAE,CAC1B,MAAO,CAAAC,KAAK,IAAAC,MAAA,CAAI,IAAI,CAACjB,QAAQ,YAAW,CACvCkB,MAAM,CAAE,MAAM,CACdpB,OAAO,CAAE,IAAI,CAACG,QAAQ,CACtBkB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACpBP,KAAK,CAALA,KAAK,CACLC,QAAQ,CAARA,QACD,CAAC,CACF,CAAC,CAAC,CAACO,IAAI,CAAC,IAAI,CAACjB,MAAM,CAAC,CAClBiB,IAAI,CAAC,SAACE,IAAI,CAAK,CACf,GAAIA,IAAI,CAACC,KAAK,CAAE,CACfC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAEH,IAAI,CAACC,KAAK,CAAC,CACvC,MAAO,CAAAD,IAAI,CAACC,KAAK,CAClB,CACD,CAAC,CAAC,CACJ,CAAC,GAAAtB,GAAA,cAAAC,KAAA,CAED,SAAAwB,WAAWH,KAAK,CAAE,CACjB,MAAO,CAAAT,KAAK,IAAAC,MAAA,CAAI,IAAI,CAACjB,QAAQ,cAAa,CACzCF,OAAO,CAAE,CACR,cAAc,CAAE,kBAAkB,CAClC+B,aAAa,WAAAZ,MAAA,CAAYQ,KAAK,CAC/B,CACD,CAAC,CAAC,CAACH,IAAI,CAAC,IAAI,CAACjB,MAAM,CAAC,CACrB,CAAC,WAAAV,IAAA,KAKF,MAAO,IAAM,CAAAmC,IAAI,CAAG,GAAI,CAAAnC,IAAI,CAAC,CAC5BE,OAAO,CAAE,+BAA+B,CACxCC,OAAO,CAAE,CACR,cAAc,CAAE,kBACjB,CACD,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}