{"ast":null,"code":"class Auth {\n  constructor(_ref) {\n    let {\n      baseUrl,\n      headers\n    } = _ref;\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n  _onRes(response) {\n    return response.ok ? response.json() : Promise.reject({\n      ...response,\n      message: \"Ошибка на стороне сервиса\"\n    });\n  }\n  register(email, password) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(this._onRes);\n  }\n  authorize(email, password) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(this._onRes).then(data => {\n      if (data.token) {\n        localStorage.setItem('jwt', data.token);\n        return data.token;\n      }\n    });\n  }\n  checkToken(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    }).then(this._onRes);\n  }\n}\nexport const auth = new Auth({\n  baseUrl: 'https://auth.nomoreparties.co',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});","map":{"version":3,"names":["Auth","constructor","_ref","baseUrl","headers","_baseUrl","_headers","_onRes","response","ok","json","Promise","reject","message","register","email","password","fetch","method","body","JSON","stringify","then","authorize","data","token","localStorage","setItem","checkToken","authorization","getItem","auth"],"sources":["/Users/dianasysoeva/Downloads/mesto-react-main/src/utils/auth.js"],"sourcesContent":["class Auth {\n\tconstructor({ baseUrl, headers }) {\n\t\tthis._baseUrl = baseUrl;\n\t\tthis._headers = headers;\n\t}\n\n\t_onRes(response) {\n\t\treturn response.ok ? response.json() : Promise.reject({ ...response, message: \"Ошибка на стороне сервиса\" });\n\t}\n\n\tregister(email, password ) {\n\t\treturn fetch(`${this._baseUrl}/signup`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: this._headers,\n\t\t\tbody: JSON.stringify({ email, password })\n\t\t}).then(this._onRes)\n\t}\n\n\tauthorize(email, password) {\n\t\treturn fetch(`${this._baseUrl}/signin`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: this._headers,\n\t\t\tbody: JSON.stringify({\n\t\t\t\temail,\n\t\t\t\tpassword\n\t\t\t})\n\t\t}).then(this._onRes)\n\t\t.then((data) => {\n\t\t\tif (data.token) {\n\t\t\t  localStorage.setItem('jwt', data.token)\n\t\t\t  return data.token\n\t\t\t}\n\t\t })\n\t}\n\n\tcheckToken(token){\n\treturn fetch(`${this._baseUrl}/users/me`, {\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tauthorization: `Bearer ${localStorage.getItem(\"token\")}`\n\t\t },\n\t}).then(this._onRes)\n}\n\n\n}\n\n\texport const auth = new Auth({\n\t\tbaseUrl: 'https://auth.nomoreparties.co',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json'\n\t\t}\n\t});\n"],"mappings":"AAAA,MAAMA,IAAI,CAAC;EACVC,WAAWA,CAAAC,IAAA,EAAuB;IAAA,IAAtB;MAAEC,OAAO;MAAEC;IAAQ,CAAC,GAAAF,IAAA;IAC/B,IAAI,CAACG,QAAQ,GAAGF,OAAO;IACvB,IAAI,CAACG,QAAQ,GAAGF,OAAO;EACxB;EAEAG,MAAMA,CAACC,QAAQ,EAAE;IAChB,OAAOA,QAAQ,CAACC,EAAE,GAAGD,QAAQ,CAACE,IAAI,CAAC,CAAC,GAAGC,OAAO,CAACC,MAAM,CAAC;MAAE,GAAGJ,QAAQ;MAAEK,OAAO,EAAE;IAA4B,CAAC,CAAC;EAC7G;EAEAC,QAAQA,CAACC,KAAK,EAAEC,QAAQ,EAAG;IAC1B,OAAOC,KAAK,CAAE,GAAE,IAAI,CAACZ,QAAS,SAAQ,EAAE;MACvCa,MAAM,EAAE,MAAM;MACdd,OAAO,EAAE,IAAI,CAACE,QAAQ;MACtBa,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEN,KAAK;QAAEC;MAAS,CAAC;IACzC,CAAC,CAAC,CAACM,IAAI,CAAC,IAAI,CAACf,MAAM,CAAC;EACrB;EAEAgB,SAASA,CAACR,KAAK,EAAEC,QAAQ,EAAE;IAC1B,OAAOC,KAAK,CAAE,GAAE,IAAI,CAACZ,QAAS,SAAQ,EAAE;MACvCa,MAAM,EAAE,MAAM;MACdd,OAAO,EAAE,IAAI,CAACE,QAAQ;MACtBa,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACpBN,KAAK;QACLC;MACD,CAAC;IACF,CAAC,CAAC,CAACM,IAAI,CAAC,IAAI,CAACf,MAAM,CAAC,CACnBe,IAAI,CAAEE,IAAI,IAAK;MACf,IAAIA,IAAI,CAACC,KAAK,EAAE;QACdC,YAAY,CAACC,OAAO,CAAC,KAAK,EAAEH,IAAI,CAACC,KAAK,CAAC;QACvC,OAAOD,IAAI,CAACC,KAAK;MACnB;IACA,CAAC,CAAC;EACJ;EAEAG,UAAUA,CAACH,KAAK,EAAC;IACjB,OAAOR,KAAK,CAAE,GAAE,IAAI,CAACZ,QAAS,WAAU,EAAE;MACzCD,OAAO,EAAE;QACR,cAAc,EAAE,kBAAkB;QAClCyB,aAAa,EAAG,UAASH,YAAY,CAACI,OAAO,CAAC,OAAO,CAAE;MACvD;IACF,CAAC,CAAC,CAACR,IAAI,CAAC,IAAI,CAACf,MAAM,CAAC;EACrB;AAGA;AAEC,OAAO,MAAMwB,IAAI,GAAG,IAAI/B,IAAI,CAAC;EAC5BG,OAAO,EAAE,+BAA+B;EACxCC,OAAO,EAAE;IACR,cAAc,EAAE;EACjB;AACD,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}