{"ast":null,"code":"class Auth {\n  constructor(_ref) {\n    let {\n      baseUrl,\n      headers\n    } = _ref;\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n  _onRes(response) {\n    return response.ok ? response.json() : Promise.reject({\n      ...response,\n      message: \"Ошибка на стороне сервиса\"\n    });\n  }\n  register(_ref2) {\n    let {\n      email,\n      password\n    } = _ref2;\n    return fetch(`${this._baseUrl}/signup`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(this._onRes);\n  }\n  authorize(_ref3) {\n    let {\n      email,\n      password\n    } = _ref3;\n    return fetch(`${this._baseUrl}/signin`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        password,\n        email\n      })\n    }).then(this._onRes);\n  }\n  checkToken(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: {\n        ...this._headers,\n        authorization: `Bearer ${token}`\n      }\n    }).then(this._onRes);\n  }\n}\nexport const auth = new Auth({\n  baseUrl: 'https://auth.nomoreparties.co',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});","map":{"version":3,"names":["Auth","constructor","_ref","baseUrl","headers","_baseUrl","_headers","_onRes","response","ok","json","Promise","reject","message","register","_ref2","email","password","fetch","method","body","JSON","stringify","then","authorize","_ref3","checkToken","token","authorization","auth"],"sources":["/Users/dianasysoeva/Downloads/mesto-react-main/src/utils/auth.js"],"sourcesContent":["class Auth {\n\tconstructor({ baseUrl, headers }) {\n\t\tthis._baseUrl = baseUrl;\n\t\tthis._headers = headers;\n\t}\n\n\t_onRes(response) {\n\t\treturn response.ok ? response.json() : Promise.reject({ ...response, message: \"Ошибка на стороне сервиса\" });\n\t}\n\n\tregister({ email, password }) {\n\t\treturn fetch(`${this._baseUrl}/signup`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: this._headers,\n\t\t\tbody: JSON.stringify({ email, password })\n\t\t}).then(this._onRes)\n\t}\n\n\tauthorize({email, password}) {\n\t\treturn fetch(`${this._baseUrl}/signin`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: this._headers,\n\t\t\tbody: JSON.stringify({\n\t\t\t\tpassword,\n\t\t\t\temail\n\t\t\t})\n\t\t}).then(this._onRes)\n\t}\n\n\tcheckToken(token){\n\treturn fetch(`${this._baseUrl}/users/me`, {\n\t\theaders: {...this._headers, authorization: `Bearer ${token}` }\n\t}).then(this._onRes)\n}\n\n\n}\n\n\texport const auth = new Auth({\n\t\tbaseUrl: 'https://auth.nomoreparties.co',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json'\n\t\t}\n\t});\n"],"mappings":"AAAA,MAAMA,IAAI,CAAC;EACVC,WAAWA,CAAAC,IAAA,EAAuB;IAAA,IAAtB;MAAEC,OAAO;MAAEC;IAAQ,CAAC,GAAAF,IAAA;IAC/B,IAAI,CAACG,QAAQ,GAAGF,OAAO;IACvB,IAAI,CAACG,QAAQ,GAAGF,OAAO;EACxB;EAEAG,MAAMA,CAACC,QAAQ,EAAE;IAChB,OAAOA,QAAQ,CAACC,EAAE,GAAGD,QAAQ,CAACE,IAAI,CAAC,CAAC,GAAGC,OAAO,CAACC,MAAM,CAAC;MAAE,GAAGJ,QAAQ;MAAEK,OAAO,EAAE;IAA4B,CAAC,CAAC;EAC7G;EAEAC,QAAQA,CAAAC,KAAA,EAAsB;IAAA,IAArB;MAAEC,KAAK;MAAEC;IAAS,CAAC,GAAAF,KAAA;IAC3B,OAAOG,KAAK,CAAE,GAAE,IAAI,CAACb,QAAS,SAAQ,EAAE;MACvCc,MAAM,EAAE,MAAM;MACdf,OAAO,EAAE,IAAI,CAACE,QAAQ;MACtBc,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEN,KAAK;QAAEC;MAAS,CAAC;IACzC,CAAC,CAAC,CAACM,IAAI,CAAC,IAAI,CAAChB,MAAM,CAAC;EACrB;EAEAiB,SAASA,CAAAC,KAAA,EAAoB;IAAA,IAAnB;MAACT,KAAK;MAAEC;IAAQ,CAAC,GAAAQ,KAAA;IAC1B,OAAOP,KAAK,CAAE,GAAE,IAAI,CAACb,QAAS,SAAQ,EAAE;MACvCc,MAAM,EAAE,MAAM;MACdf,OAAO,EAAE,IAAI,CAACE,QAAQ;MACtBc,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACpBL,QAAQ;QACRD;MACD,CAAC;IACF,CAAC,CAAC,CAACO,IAAI,CAAC,IAAI,CAAChB,MAAM,CAAC;EACrB;EAEAmB,UAAUA,CAACC,KAAK,EAAC;IACjB,OAAOT,KAAK,CAAE,GAAE,IAAI,CAACb,QAAS,WAAU,EAAE;MACzCD,OAAO,EAAE;QAAC,GAAG,IAAI,CAACE,QAAQ;QAAEsB,aAAa,EAAG,UAASD,KAAM;MAAE;IAC9D,CAAC,CAAC,CAACJ,IAAI,CAAC,IAAI,CAAChB,MAAM,CAAC;EACrB;AAGA;AAEC,OAAO,MAAMsB,IAAI,GAAG,IAAI7B,IAAI,CAAC;EAC5BG,OAAO,EAAE,+BAA+B;EACxCC,OAAO,EAAE;IACR,cAAc,EAAE;EACjB;AACD,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}